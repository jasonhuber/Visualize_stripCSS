//this JSON must be available across all functions. It is used to build the list of options on the left as well as the actual controls when they are dropped.

var controls = '{ "controls" : [{ "id": "Birthdate", "name": "Birthdate", "type":"doubledate" , "datatype": "date", "options":[], "SQL": " birthday between {0} AND {1} " },{ "id": "Department", "name": "Department", "type":"multiselect" , "datatype": "string", "options":[{"label":"Unknown","value":"-1"},{"label":"Ain","value":"1"},{"label":"Aube","value":"10"},{"label":"Aude","value":"11"},{"label":"Aveyron","value":"12"},{"label":"Bouches-du-Rhone","value":"13"},{"label":"Calvados","value":"14"},{"label":"Cantal","value":"15"},{"label":"Charente","value":"16"},{"label":"Charente-Maritime","value":"17"},{"label":"Cher","value":"18"},{"label":"Correze","value":"19"},{"label":"Aisne","value":"2"},{"label":"Cote-d`Or","value":"21"},{"label":"Cotes-d`Armor","value":"22"},{"label":"Creuse","value":"23"},{"label":"Dordogne","value":"24"},{"label":"Doubs","value":"25"},{"label":"Drome","value":"26"},{"label":"Eure","value":"27"},{"label":"Eure-et-Loir","value":"28"},{"label":"Finistere","value":"29"},{"label":"Corse-du-Sud","value":"2A"},{"label":"Haute-Corse","value":"2B"},{"label":"Allier","value":"3"},{"label":"Gard","value":"30"},{"label":"Haute-Garonne","value":"31"},{"label":"Gers","value":"32"},{"label":"Gironde","value":"33"},{"label":"Herault","value":"34"},{"label":"Ille-et-Vilaine","value":"35"},{"label":"Indre","value":"36"},{"label":"Indre-et-Loire","value":"37"},{"label":"Isere","value":"38"},{"label":"Jura","value":"39"},{"label":"Alpes-de-Haute-Provence","value":"4"},{"label":"Landes","value":"40"},{"label":"Loir-et-Cher","value":"41"},{"label":"Loire","value":"42"},{"label":"Haute-Loire","value":"43"},{"label":"Loire-Atlantique","value":"44"},{"label":"Loiret","value":"45"},{"label":"Lot","value":"46"},{"label":"Lot-et-Garonne","value":"47"},{"label":"Lozere","value":"48"},{"label":"Maine-et-Loire","value":"49"},{"label":"Hautes-Alpes","value":"5"},{"label":"Manche","value":"50"},{"label":"Marne","value":"51"},{"label":"Haute-Marne","value":"52"},{"label":"Mayenne","value":"53"},{"label":"Meurthe-et-Moselle","value":"54"},{"label":"Meuse","value":"55"},{"label":"Morbihan","value":"56"},{"label":"Moselle","value":"57"},{"label":"Nievre","value":"58"},{"label":"Nord","value":"59"},{"label":"Alpes-Maritimes","value":"6"},{"label":"Oise","value":"60"},{"label":"Orne","value":"61"},{"label":"Pas-de-Calais","value":"62"},{"label":"Puy-de-Dome","value":"63"},{"label":"Pyrenees-Atlantiques","value":"64"},{"label":"Hautes-Pyrenees","value":"65"},{"label":"Pyrenees-Orientales","value":"66"},{"label":"Bas-Rhin","value":"67"},{"label":"Haut-Rhin","value":"68"},{"label":"Rhone","value":"69"},{"label":"Ardeche","value":"7"},{"label":"Haute-Saone","value":"70"},{"label":"Saone-et-Loire","value":"71"},{"label":"Sarthe","value":"72"},{"label":"Savoie","value":"73"},{"label":"Haute-Savoie","value":"74"},{"label":"Paris","value":"75"},{"label":"Seine-Maritime","value":"76"},{"label":"Seine-et-Marne","value":"77"},{"label":"Yvelines","value":"78"},{"label":"Deux-Sevres","value":"79"},{"label":"Ardennes","value":"8"},{"label":"Somme","value":"80"},{"label":"Tarn","value":"81"},{"label":"Tarn-et-Garonne","value":"82"},{"label":"Var","value":"83"},{"label":"Vaucluse","value":"84"},{"label":"Vendee","value":"85"},{"label":"Vienne","value":"86"},{"label":"Haute-Vienne","value":"87"},{"label":"Vosges","value":"88"},{"label":"Yonne","value":"89"},{"label":"Ariege","value":"9"},{"label":"Territoire de Belfort","value":"90"},{"label":"Essonne","value":"91"},{"label":"Hauts-de-Seine","value":"92"},{"label":"Seine-Saint-Denis","value":"93"},{"label":"Val-de-Marne","value":"94"},{"label":"Val-d`Oise","value":"95"},{"label":"Guadeloupe","value":"971"},{"label":"Martinique","value":"972"},{"label":"Guyane","value":"973"},{"label":"La Reunion","value":"974"},{"label":"St-Pierre-et-Miquelon", "value":"975"} , {"label" : "Mayotte" , "value" : "976"} , {"label" : "Wallis et Futuna","value":"986"},{"label":"Polynesie Francaise","value":"987"},{"label":"Nouvelle Caledonie","value":"988"}], "SQL": " fk_geo_dpt in ({0}) " },{ "id": "Region", "name": "Region", "type":"select" , "datatype": "string", "options":[{"label":"Unknown", "value":"-1"},{"label":"Outre Mer", "value":"0"},{"label":"Guadeloupe", "value":"1"},{"label":"Martinique", "value":"2"},{"label":"Guyane", "value":"3"},{"label":"La reunion", "value":"4"},{"label":"Ile-de-France", "value":"11"},{"label":"Champagne-Ardenne", "value":"21"},{"label":"Picardie", "value":"22"},{"label":"Haute-Normandie", "value":"23"},{"label":"Centre", "value":"24"},{"label":"Basse-Normandie", "value":"25"},{"label":"Bourgogne", "value":"26"},{"label":"Nord-Pas-de-Calais", "value":"31"},{"label":"Lorraine", "value":"41"},{"label":"Alsace", "value":"42"},{"label":"Franche-Comte", "value":"43"},{"label":"Pays de la Loire", "value":"52"},{"label":"Bretagne", "value":"53"},{"label":"Poitou-Charentes", "value":"54"},{"label":"Aquitaine", "value":"72"},{"label":"Midi-Pyrenees", "value":"73"},{"label":"Limousin", "value":"74"},{"label":"Rhone-Alpes", "value":"82"},{"label":"Auvergne", "value":"83"},{"label":"Languedoc-Roussillon", "value":"91"},{"label":"Provence-Alpes-Cote d`Azur", "value":"93"},{"label":"Corse", "value":"94"}], "SQL": " fk_geo_region in ({0}) " },{ "id": "Gender", "name": "Gender", "type":"radiogroup" , "datatype": "string", "options":[{"label":"Homme", "value":"Homme"}, {"label":"Femme", "value":"Femme"}, {"label":"UnKnown", "value":"NSP"}], "SQL": " zz_fs_ref_user_title_4.label = {0}  " },{ "id": "Optin", "name": "Optin", "type":"multiselect" , "datatype": "number", "options":[{"label":"Medisite A la Une", "value":"381"},{"label":"Medisite Evenementielle", "value":"517"},{"label":"Planet Week End", "value":"595"},{"label":"Planet a la Une", "value":"596"},{"label":"PlanetVideos", "value":"603"},{"label":"FemmesPlus a la Une", "value":"608"},{"label":"Exclusivite", "value":"623"},{"label":"Femmes Plus Evenementielle", "value":"624"},{"label":"Anniversaire", "value":"628"},{"label":"Femmesplus Cuisine Magazine", "value":"1685"},{"label":"Bons plans", "value":"1765"},{"label":"Partenaires", "value":"1766"},{"label":"FemmesPlus Cuisine Quotidienne", "value":"1790"},{"label":"Planet Mi-journee", "value":"2083"},{"label":"Medisite Nutrition-Minceur", "value":"4389"},{"label":"Planet Alerte Infos", "value":"6654"},{"label":"Medisite Alerte Infos", "value":"6709"},{"label":"Votre anniversaire", "value":"8987"},{"label":"Epargne / Placement", "value":"12146"},{"label":"Prévoyance", "value":"13561"},{"label":"Maison", "value":"14054"},{"label":"Financement", "value":"14121"},{"label":"Assurance santé", "value":"15539"},{"label":"Culture Loisirs", "value":"15541"},{"label":"Tourisme", "value":"15542"},{"label":"Santé Bien être", "value":"15543"},{"label":"Concours", "value":"21634"},{"label":"Medisite Grossesse", "value":"31276"},{"label":"Medisite Calendrier de la grossesse", "value":"33597"},{"label":"Planet Edition du soir", "value":"37153"},{"label":"Btob", "value":"76857"},{"label":"Medisite Info Santé", "value":"85885"},{"label":"Test responsive", "value":"98292"}], "SQL": " fk_news_tid in ({0})  " }, { "id": "3rdParty", "name": "3rd Party", "type":"radiogroup" , "datatype": "string", "options":[{"label":"Yes", "value":"true"}, {"label":"No", "value":"false"}], "SQL": " t_1766 = {0}" } ,{ "id": "RecruitmentSource", "name": "Recruitment Source", "type":"textwithselect" , "datatype": "string", "options":[{"label":"Equal to", "value":" = {0} "},{"label":"Starts With", "value":" like {0}% "},{"label":"Contains", "value":" like %{0}% "}], "SQL": " zz_fs_ref_user_matrix_4.cc_1766  {1}" },{ "id": "LastSubDate", "name": "Last Sub Date", "type":"doubledate" , "datatype": "date", "options":[], "SQL": " (zz_fs_ref_user_matrix_4.dm_1766 between {0} AND {1} and zz_fs_ref_user_matrix_4.t_1766 = true) " },{ "id": "NumberEmail1Month", "name": "# Email w/in Month", "type":"textwithselect" , "datatype": "number", "options":[{"label":"Equal to", "value":" = {0}"},{"label":"Greater or equal than", "value":" >= {0}"},{"label":"Greater than", "value":" > {0}"},{"label":"Less than ", "value":" < {0}"}], "SQL": " zz_fs_ref_user_matrix_4.id in (select distinct(fk_user) from (select fk_user, count(fk_user) from zz_fs_stats_90_4 where fk_type = 0 and is_unsubscription = false and evt_timestamp > current_date - 30 group by fk_user having count(fk_user) {1} ))" },{ "id": "NumberEmail3Month", "name": "# Email w/in 3 Months", "type":"textwithselect" , "datatype": "number", "options":[{"label":"Equal to", "value":" = {0}"},{"label":"Greater than or equal to", "value":" >= {0}"},{"label":"Greater than", "value":" > {0}"},{"label":"Less than ", "value":" < {0}"}], "SQL": " zz_fs_ref_user_matrix_4.id in (select distinct(fk_user) from (select fk_user, count(fk_user) from zz_fs_stats_90_4 where fk_type = 0 and is_unsubscription = false and evt_timestamp > current_date - 30 group by fk_user having count(fk_user) {1}))" }]} ';

/*
{ "id": "ColorPreference", "name": "Color Preference", "type":"checkboxgroup", "datatype": "string", "options":[{"label":"Red", "value":"red"},{"label":"Blue", "value":"blue"},{"label":"Green", "value":"green"}], "SQL": " color in ({0}) "}, { "id": "SignonDate", "name": "Sign on Date", "type":"doubledate" , "datatype": "date", "options":[], "SQL": " signondate between {0} AND {1}" }
*/